<%-include('../includes/head.ejs')%>
<%-include('../includes/nav.ejs')%>
<main class="pt-5">
  <section class="mb-5">
    <div class="container">
      <div class="row py-5 justify-content-center">
        <% if (products.length > 0) { %>
          <% for (const product of products) { %>
            <div class="product card col-lg-4 text-center mb-3 me-md-3">
              <div class="h-75">
                <img class="card-img-top img-fluid" src="/<%=product.imageUrl%>" alt="<%=product.title%>" />
              </div>
              <div class="card-text mt-3">
                <p class="card-title capitalize"><%=product.title%></p>
                <p class="card-text text-muted">$<%=product.price%></p>
              </div>
              <div class="mt-3 d-flex flex-row justify-content-center">
                <a class="btn product-btn me-2" href="/product/<%=product._id%>">Details</a>
                <%-include('../includes/add-to-cart.ejs', {product: product})%>
              </div>
            </div>
          <% } %>
          <%-include('../includes/pagination.ejs')%>
        <% } else { %>
          <%-include('../error/products-not-found.ejs')%>
        <% } %>
    </div>
  </section>
<%-include('../includes/end.ejs')%>